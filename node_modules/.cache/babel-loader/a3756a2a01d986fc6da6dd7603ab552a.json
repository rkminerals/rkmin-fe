{"ast":null,"code":"import _slicedToArray from\"/Users/neeleshsharma/Desktop/rkmin-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import moment from'moment';import{PdfMakeWrapper}from'pdfmake-wrapper';import*as pdfFonts from\"pdfmake/build/vfs_fonts\";import{Row,Col,Form,Input,Button,Radio,Select,Cascader,DatePicker,InputNumber,TreeSelect,Switch,Modal}from'antd';import TextArea from'antd/lib/input/TextArea';import axios from'axios';import{API_BASE}from'../../apiBaseInfo';import{successToast,failureToast}from'../../App';import{LoadingOutlined}from'@ant-design/icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function GrindingEntryForm(props){PdfMakeWrapper.setFonts(pdfFonts);var pdfEntryErrorReport=new PdfMakeWrapper();var _useState=useState('small'),_useState2=_slicedToArray(_useState,2),componentSize=_useState2[0],setComponentSize=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),submitFormLoader=_useState4[0],setSubmitFormLoader=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleteByIdLoader=_useState6[0],setDeleteByIdLoader=_useState6[1];// composition: [{inputPartRatio: Number, supplier: String, rockType: String}],\nvar productionUnits=['Unit 1','Unit 2'];var shifts=['Morning','Evening','Night'];//form payload\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),productionUnit=_useState10[0],setProductionUnit=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),mineralId=_useState12[0],setMineralId=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),shift=_useState14[0],setShift=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),mineralName=_useState16[0],setMineralName=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),quantity=_useState18[0],setQuantity=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),gradeName=_useState20[0],setGradeName=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),constituentType=_useState22[0],setConstituentType=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),composition=_useState24[0],setComposition=_useState24[1];//for composition\nvar _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),rockType=_useState26[0],setRockType=_useState26[1];var _useState27=useState(null),_useState28=_slicedToArray(_useState27,2),supplier=_useState28[0],setSupplier=_useState28[1];var _useState29=useState(null),_useState30=_slicedToArray(_useState29,2),partRatio=_useState30[0],setPartRatio=_useState30[1];// affirmation after saving into the DB\nvar _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),showAffirmation=_useState32[0],setShowAffermation=_useState32[1];var _useState33=useState(null),_useState34=_slicedToArray(_useState33,2),dataAffirmationFromDB=_useState34[0],setDataAffirmationFromDB=_useState34[1];var _useState35=useState(null),_useState36=_slicedToArray(_useState35,2),mineralForComponent=_useState36[0],setMineralForComponent=_useState36[1];var _useState37=useState(null),_useState38=_slicedToArray(_useState37,2),dateForComponent=_useState38[0],setDateForComponent=_useState38[1];var sendEntry=function sendEntry(){console.log(composition);var partRatioSum=0;if(composition.length!=0){composition.map(function(part){partRatioSum+=part.inputPartRatio;});}if(date==null||mineralId==null||mineralName==null||quantity==null||composition==[]||gradeName==null||productionUnit==null||shift==null){failureToast(\"All fields are required\");}else if(partRatioSum<1||partRatioSum>1){failureToast(\"Sum of constituent partRatios must be 1\");}else{setSubmitFormLoader(true);axios.post(API_BASE+\"/api/grindingEntryModel\",{\"grindingDate\":date,\"productionUnitUsed\":productionUnit,\"shift\":shift,\"mineralId\":mineralId,\"mineralName\":mineralName,\"gradeName\":gradeName,\"quantityProduced\":quantity,\"composition\":composition},{headers:{'Authorization':\"\".concat(sessionStorage.getItem('rkminToken'))}}).then(function(res){console.log(res.data.message);if(res.data.message==\"success\"){axios.get(API_BASE+'/api/grindingEntryModel/getLastInserted',{headers:{'Authorization':\"\".concat(sessionStorage.getItem('rkminToken'))}}).then(function(res){setDataAffirmationFromDB(res.data.content);}).then(function(){setShowAffermation(true);setSubmitFormLoader(false);});}}).catch(function(err){setSubmitFormLoader(false);failureToast('Something went wrong while submitting the form');});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Row,{style:{height:'75vh',overflowY:'scroll',paddingBottom:'20px',paddingTop:'20px'},children:[/*#__PURE__*/_jsx(Col,{xs:{span:24},md:{span:20},children:/*#__PURE__*/_jsxs(Form,{labelCol:{span:8},wrapperCol:{span:12},layout:\"horizontal\",initialValues:{size:componentSize},onValuesChange:function onValuesChange(){},size:componentSize,onFinish:function onFinish(values){console.log(values);},children:[/*#__PURE__*/_jsx(Form.Item,{label:\"Grinding Date\",style:{textAlign:'left'},children:/*#__PURE__*/_jsx(DatePicker,{value:dateForComponent,onChange:function onChange(e){if(e){console.log(e._d);setDateForComponent(moment(e._d));var date=e._d.toString();var dateArray=date.split(\" \");// customDateString Day/Month/DateOFMonth/Year/\nvar customDateString=\"\".concat(dateArray[0],\"/\").concat(dateArray[1],\"/\").concat(dateArray[2],\"/\").concat(dateArray[3]);setDate(customDateString);}}})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Production Unit\",children:/*#__PURE__*/_jsx(Select,{defaultValue:\"Select\",value:productionUnit,onChange:function onChange(value){console.log(value);setProductionUnit(value);},children:productionUnits.map(function(unit){return/*#__PURE__*/_jsx(Select.Option,{value:unit,children:unit});})})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Shift\",children:/*#__PURE__*/_jsx(Select,{defaultValue:\"Select\",value:shift,onChange:function onChange(value){console.log(value);setShift(value);},children:shifts.map(function(shift){return/*#__PURE__*/_jsx(Select.Option,{value:shift,children:shift});})})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Mineral\",children:/*#__PURE__*/_jsx(Select,{defaultValue:\"Select\",value:mineralName,onChange:function onChange(value){console.log(value);setMineralName(value);props.minerals.map(function(mineral){if(mineral.mineralName==value){setMineralId(mineral._id);setMineralForComponent(mineral);}});},children:props.minerals.map(function(mineral){return/*#__PURE__*/_jsx(Select.Option,{value:mineral.mineralName,children:mineral.mineralName});})})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Grade\",children:/*#__PURE__*/_jsx(Select,{value:gradeName,onChange:function onChange(value){setGradeName(value);},children:mineralForComponent!=null?mineralForComponent.powderGrades.map(function(grade){return/*#__PURE__*/_jsx(Select.Option,{value:grade.gradeName,children:grade.gradeName});}):\"\"})}),/*#__PURE__*/_jsx(Form.Item,{label:\"Quantity\",style:{textAlign:\"left\"},children:/*#__PURE__*/_jsx(InputNumber,{value:quantity,onChange:function onChange(value){if(value>0){setQuantity(value);}else{failureToast(\"'Quantity' must be a positive number\");}}})}),/*#__PURE__*/_jsx(Form.Item,{label:\"constituentType\",style:{textAlign:\"left\"},children:/*#__PURE__*/_jsxs(Radio.Group,{onChange:function onChange(value){setConstituentType(value.target.value);console.log(constituentType);},children:[/*#__PURE__*/_jsx(Radio,{value:'Powder',children:\"Powder\"}),/*#__PURE__*/_jsx(Radio,{value:'Rock',children:\"Rock\"})]})}),/*#__PURE__*/_jsxs(Form.Item,{label:\"Composition\",style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"sub\",{children:\"Part Ratio\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(InputNumber,{value:partRatio,onChange:function onChange(value){if(value>0){setPartRatio(value);}}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"sub\",{children:\"Supplier\"}),/*#__PURE__*/_jsx(Select,{value:supplier,onChange:function onChange(value){setSupplier(value);},children:mineralForComponent!=null?mineralForComponent.suppliers.map(function(supplier){return/*#__PURE__*/_jsx(Select.Option,{value:supplier,children:supplier});}):\"\"}),/*#__PURE__*/_jsx(\"sub\",{children:constituentType==='Powder'?'Powder type':'Rock Type'}),/*#__PURE__*/_jsxs(Select,{value:rockType,onChange:function onChange(value){setRockType(value);},children:[mineralForComponent!=null&&constituentType==='Rock'?mineralForComponent.rockTypes.map(function(rockType){if(rockType.supplier===supplier){return/*#__PURE__*/_jsx(Select.Option,{value:rockType.rockType,children:rockType.rockType});}}):\"\",mineralForComponent!=null&&constituentType==='Powder'?mineralForComponent.powderGrades.map(function(grade){if(grade.supplier===supplier){return/*#__PURE__*/_jsx(Select.Option,{value:grade.gradeName,children:grade.gradeName});}}):\"\"]}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'5px'},onClick:function onClick(){if(partRatio==null||supplier==null||rockType==null){failureToast(\"Empty fields in 'Composition' are not allowed\");}else{var compositionPart=constituentType==='Rock'?{inputPartRatio:partRatio,supplier:supplier,rockType:rockType,constituentType:constituentType}:{inputPartRatio:partRatio,supplier:supplier,grade:rockType,constituentType:constituentType};composition.push(compositionPart);setPartRatio(null);setSupplier(null);setRockType(null);}},children:\"Add\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'20px'},children:[/*#__PURE__*/_jsxs(\"span\",{style:{borderRadius:'2px',padding:'3.5px',marginLeft:'15px',color:'yellow',backgroundColor:'#1890ff'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'yellow'},children:composition.length}),\" constituents\"]}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'2px',marginLeft:'3px',border:'1px solid #1890ff'},onClick:function onClick(){setComposition([]);},children:\"Reset constituents\"})]})]})]})}),/*#__PURE__*/_jsxs(Col,{xs:{span:24},md:{span:24},children:[/*#__PURE__*/_jsx(Button,{style:{},type:\"primary\",onClick:sendEntry,children:submitFormLoader?/*#__PURE__*/_jsx(LoadingOutlined,{}):\"Save\"}),/*#__PURE__*/_jsx(Button,{style:{},onClick:function onClick(){setShowAffermation(false);setDateForComponent(null);setShift(null);setQuantity(null);setComposition([]);setMineralName(null);setMineralId(null);setGradeName(null);setProductionUnit(null);},type:\"link\",children:\"Reset\"})]})]}),/*#__PURE__*/_jsxs(Modal,{title:\"Confirmation\",visible:showAffirmation,footer:[/*#__PURE__*/_jsx(Button,{type:\"ghost\",onClick:function onClick(){setDeleteByIdLoader(true);console.log(dataAffirmationFromDB);//delete the record from database and resubmit\naxios.post(API_BASE+\"/api/grindingEntryModel/deleteById/\"+dataAffirmationFromDB[0]._id,dataAffirmationFromDB[0],{headers:{'Authorization':\"\".concat(sessionStorage.getItem('rkminToken'))}}).then(function(res){// failureToast(res.data.message + \"deleted\");\n// pdfEntryErrorReport.add(JSON.stringify(dataAffirmationFromDB));\n// pdfEntryErrorReport.create().download();\n}).then(function(){setShowAffermation(false);setDeleteByIdLoader(false);}).catch(function(err){failureToast(\"Error! Not deleted\");setDeleteByIdLoader(false);});},children:deleteByIdLoader?/*#__PURE__*/_jsx(LoadingOutlined,{}):\"Edit\"},\"back\"),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){successToast(\"Entry Saved\");setShowAffermation(false);setDateForComponent(null);setShift(null);setQuantity(null);setComposition([]);setMineralName(null);setMineralId(null);setGradeName(null);setProductionUnit(null);},children:\"Done\"},\"submit\")// <Button\n//   key=\"link\"\n//   href=\"https://google.com\"\n//   type=\"primary\"\n//   loading={loading}\n//   onClick={this.handleOk}\n// >\n//   Search on Google\n// </Button>,\n],onCancel:function onCancel(){},children:[\"Please re-examin the submitted document\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"sub\",{children:\" Click on \\\"Submit\\\" to save or click on \\\"Edit\\\" to make changes  \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"ul\",{children:dataAffirmationFromDB?Object.keys(dataAffirmationFromDB[0]).map(function(key){if(key!=\"_id\"&&key!=\"timeStamp\"&&key!=\"__v\"){return/*#__PURE__*/_jsxs(\"li\",{children:[key,\" : \",JSON.stringify(dataAffirmationFromDB[0][key])]});}else{return\"\";}}):\"\"})]})]});}export default GrindingEntryForm;","map":{"version":3,"sources":["/Users/neeleshsharma/Desktop/rkmin-fe/src/Forms/grindingEntryForm/index.js"],"names":["React","useState","moment","PdfMakeWrapper","pdfFonts","Row","Col","Form","Input","Button","Radio","Select","Cascader","DatePicker","InputNumber","TreeSelect","Switch","Modal","TextArea","axios","API_BASE","successToast","failureToast","LoadingOutlined","GrindingEntryForm","props","setFonts","pdfEntryErrorReport","componentSize","setComponentSize","submitFormLoader","setSubmitFormLoader","deleteByIdLoader","setDeleteByIdLoader","productionUnits","shifts","date","setDate","productionUnit","setProductionUnit","mineralId","setMineralId","shift","setShift","mineralName","setMineralName","quantity","setQuantity","gradeName","setGradeName","constituentType","setConstituentType","composition","setComposition","rockType","setRockType","supplier","setSupplier","partRatio","setPartRatio","showAffirmation","setShowAffermation","dataAffirmationFromDB","setDataAffirmationFromDB","mineralForComponent","setMineralForComponent","dateForComponent","setDateForComponent","sendEntry","console","log","partRatioSum","length","map","part","inputPartRatio","post","headers","sessionStorage","getItem","then","res","data","message","get","content","catch","err","height","overflowY","paddingBottom","paddingTop","span","size","values","textAlign","e","_d","toString","dateArray","split","customDateString","value","unit","minerals","mineral","_id","powderGrades","grade","target","suppliers","rockTypes","marginTop","compositionPart","push","marginLeft","borderRadius","padding","color","backgroundColor","border","Object","keys","key","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport moment from 'moment';\r\nimport { PdfMakeWrapper } from 'pdfmake-wrapper'; \r\nimport * as pdfFonts from \"pdfmake/build/vfs_fonts\";\r\n\r\nimport {\r\n    Row,\r\n    Col,\r\n    Form,\r\n    Input,\r\n    Button,\r\n    Radio,\r\n    Select,\r\n    Cascader,\r\n    DatePicker,\r\n    InputNumber, \r\n    TreeSelect,\r\n    Switch,\r\n    Modal\r\n  } from 'antd';\r\nimport TextArea from 'antd/lib/input/TextArea';\r\nimport axios from 'axios';\r\nimport { API_BASE } from '../../apiBaseInfo';\r\nimport { successToast, failureToast } from '../../App';\r\nimport {LoadingOutlined} from '@ant-design/icons';\r\n\r\nfunction GrindingEntryForm(props) { \r\n        PdfMakeWrapper.setFonts(pdfFonts);\r\n        const pdfEntryErrorReport = new PdfMakeWrapper();\r\n\r\n        const [componentSize, setComponentSize] = useState('small');\r\n\r\n        const [submitFormLoader, setSubmitFormLoader] = useState(false);\r\n        const [deleteByIdLoader, setDeleteByIdLoader] = useState(false);\r\n\r\n        // composition: [{inputPartRatio: Number, supplier: String, rockType: String}],\r\n\r\n        const productionUnits = ['Unit 1', 'Unit 2']\r\n        const shifts = ['Morning', 'Evening', 'Night']\r\n\r\n        //form payload\r\n        const [date, setDate] = useState(null);\r\n        const [productionUnit, setProductionUnit] = useState(null);\r\n        const [mineralId, setMineralId] = useState(null);\r\n        const [shift, setShift] = useState(null);\r\n        const [mineralName, setMineralName] = useState(null);\r\n        const [quantity, setQuantity] = useState(null);\r\n        const [gradeName, setGradeName] = useState(null);\r\n\r\n        const [constituentType, setConstituentType] = useState(null);\r\n        const [composition, setComposition] = useState([]);\r\n\r\n        //for composition\r\n        const [rockType, setRockType] = useState(null);\r\n        const [supplier, setSupplier] = useState(null);\r\n        const [partRatio, setPartRatio] = useState(null);\r\n\r\n        // affirmation after saving into the DB\r\n        const [showAffirmation, setShowAffermation] = useState(false);\r\n        const [dataAffirmationFromDB, setDataAffirmationFromDB] = useState(null);\r\n\r\n        const [mineralForComponent, setMineralForComponent] = useState(null);\r\n        const [dateForComponent, setDateForComponent] = useState(null);\r\n\r\n        const sendEntry = () => { \r\n          console.log(composition);\r\n          var partRatioSum = 0;\r\n          if(composition.length != 0){ composition.map((part) => {\r\n            partRatioSum += part.inputPartRatio;\r\n          })}\r\n            if(date == null || mineralId == null || mineralName == null || quantity == null || composition == [] || gradeName == null || productionUnit == null || shift == null){\r\n                failureToast(\"All fields are required\");\r\n            } else if(partRatioSum < 1 || partRatioSum > 1){\r\n              failureToast(\"Sum of constituent partRatios must be 1\");\r\n            }else {\r\n          setSubmitFormLoader(true);\r\n            axios.post(API_BASE + \"/api/grindingEntryModel\",\r\n            {\r\n                    \"grindingDate\": date,\r\n                    \"productionUnitUsed\": productionUnit, \r\n                    \"shift\": shift,  \r\n                    \"mineralId\": mineralId,\r\n                    \"mineralName\": mineralName,\r\n                    \"gradeName\": gradeName,  \r\n                    \"quantityProduced\": quantity, \r\n                    \"composition\": composition\r\n            }, {headers : {\r\n              'Authorization': `${sessionStorage.getItem('rkminToken')}`\r\n            }}\r\n            ).then(res => {\r\n                console.log(res.data.message);\r\n                if(res.data.message == \"success\"){\r\n                axios.get(API_BASE + '/api/grindingEntryModel/getLastInserted', {headers : {\r\n                  'Authorization': `${sessionStorage.getItem('rkminToken')}`\r\n                }}).then((res) => {\r\n                    setDataAffirmationFromDB(res.data.content);\r\n                }).then(()=>{\r\n                    setShowAffermation(true);\r\n                    setSubmitFormLoader(false);\r\n                })\r\n              }\r\n            }).catch((err) => {\r\n              setSubmitFormLoader(false);\r\n              failureToast('Something went wrong while submitting the form');\r\n            })\r\n        }\r\n        }\r\n\r\n    return (\r\n        <>\r\n        <Row \r\n        style={{height: '75vh', overflowY: 'scroll', paddingBottom:'20px', paddingTop:'20px'}}\r\n        >\r\n            <Col xs={{span:24}} md={{span:20}}>\r\n            <Form\r\n                labelCol={{ span: 8 }}\r\n                wrapperCol={{ span: 12 }}\r\n                layout=\"horizontal\"\r\n                initialValues={{ size: componentSize }}\r\n                onValuesChange={()=>{}}\r\n                size={componentSize}\r\n                onFinish={(values)=>{\r\n                    console.log(values);\r\n                }}\r\n      > \r\n        <Form.Item label=\"Grinding Date\" style={{textAlign:'left'}}>\r\n          <DatePicker value={dateForComponent} onChange={(e) => {\r\n              if(e){\r\n                console.log(e._d);\r\n                setDateForComponent(moment(e._d));\r\n                var date = e._d.toString();\r\n                var dateArray = date.split(\" \");\r\n                // customDateString Day/Month/DateOFMonth/Year/\r\n                var customDateString = `${dateArray[0]}/${dateArray[1]}/${dateArray[2]}/${dateArray[3]}`;\r\n                setDate(customDateString);\r\n              }\r\n          }} />\r\n        </Form.Item>\r\n        <Form.Item label=\"Production Unit\">\r\n          <Select defaultValue={\"Select\"}\r\n          value={productionUnit}\r\n          onChange={(value) => {\r\n            console.log(value);\r\n            setProductionUnit(value); \r\n          }}>\r\n              {\r\n                  productionUnits.map((unit) => {\r\n                    return <Select.Option value={unit}>\r\n                            {unit}\r\n                        </Select.Option>\r\n                  })\r\n              } \r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Shift\">\r\n          <Select defaultValue={\"Select\"}\r\n          value={shift}\r\n          onChange={(value) => {\r\n            console.log(value);\r\n            setShift(value); \r\n          }}>\r\n              {\r\n                  shifts.map((shift) => {\r\n                    return <Select.Option value={shift}>\r\n                            {shift}\r\n                        </Select.Option>\r\n                  })\r\n              } \r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Mineral\">\r\n          <Select defaultValue={\"Select\"}\r\n          value={mineralName}\r\n          onChange={(value) => {\r\n            console.log(value);\r\n            setMineralName(value);\r\n            props.minerals.map((mineral) => {\r\n                if(mineral.mineralName == value){\r\n                    setMineralId(mineral._id);\r\n                    setMineralForComponent(mineral);\r\n                }\r\n            })\r\n          }}>\r\n              {\r\n                  props.minerals.map((mineral) => {\r\n                    return <Select.Option value={mineral.mineralName}>\r\n                            {mineral.mineralName}\r\n                        </Select.Option>\r\n                  })\r\n              } \r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Grade\">\r\n        <Select\r\n        value={gradeName}\r\n        onChange={(value) => {\r\n            setGradeName(value);\r\n        }}\r\n        >\r\n              { \r\n                mineralForComponent != null ? mineralForComponent.powderGrades.map((grade) => {\r\n                return <Select.Option value={grade.gradeName}>{grade.gradeName}</Select.Option>\r\n                }) \r\n                :\r\n                \"\"\r\n              } \r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"Quantity\" style={{textAlign:\"left\"}}>\r\n          <InputNumber value={quantity} onChange={(value) => {\r\n              if(value > 0){ setQuantity(value) }\r\n              else {  \r\n                failureToast(\"'Quantity' must be a positive number\");\r\n            }\r\n          }} />\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"constituentType\" style={{textAlign:\"left\"}}>\r\n        <Radio.Group onChange={(value)=>{\r\n          setConstituentType(value.target.value);\r\n          console.log(constituentType);\r\n        }}>\r\n          <Radio value={'Powder'}>Powder</Radio>\r\n          <Radio value={'Rock'}>Rock</Radio>\r\n        </Radio.Group>\r\n        </Form.Item>\r\n\r\n        <Form.Item label=\"Composition\" style={{textAlign:\"left\"}}>\r\n          <sub>Part Ratio</sub><br/>\r\n          <InputNumber value={partRatio} onChange={(value) => {\r\n              if(value > 0){ setPartRatio(value) } \r\n          }} /><br/>\r\n          <sub>Supplier</sub>\r\n          <Select \r\n        value={supplier}\r\n        onChange={(value) => {\r\n            setSupplier(value);\r\n        }}\r\n        >\r\n              { \r\n                mineralForComponent != null ? mineralForComponent.suppliers.map((supplier) => {\r\n                return <Select.Option value={supplier}>{supplier}</Select.Option>\r\n                }) \r\n                :\r\n                \"\"\r\n              } \r\n          </Select>\r\n          <sub>{constituentType === 'Powder' ? 'Powder type' : 'Rock Type'}</sub>\r\n\r\n          <Select\r\n          value={rockType}\r\n          onChange={(value) => {\r\n            setRockType(value);\r\n        }}\r\n        >\r\n              { \r\n                        mineralForComponent != null && constituentType === 'Rock' ? mineralForComponent.rockTypes.map((rockType) => {\r\n                            if(rockType.supplier === supplier){\r\n                            return <Select.Option value={rockType.rockType}>{rockType.rockType}</Select.Option>\r\n                            }\r\n                          })\r\n                          :\r\n                          \"\"\r\n              } \r\n              { \r\n                        mineralForComponent != null && constituentType === 'Powder' ? mineralForComponent.powderGrades.map((grade) => {\r\n                            if(grade.supplier === supplier){\r\n                            return <Select.Option value={grade.gradeName}>{grade.gradeName}</Select.Option>\r\n                            }\r\n                          })\r\n                          :\r\n                          \"\"\r\n              }\r\n          </Select>\r\n          <Button\r\n          style={{marginTop:'5px'}}\r\n          onClick={() => {\r\n            if(partRatio == null || supplier == null || rockType == null){\r\n              failureToast(\"Empty fields in 'Composition' are not allowed\");\r\n            } else {\r\n              const compositionPart = constituentType === 'Rock' ? \r\n              {\r\n                inputPartRatio: partRatio, \r\n                supplier: supplier, \r\n                rockType: rockType, \r\n                constituentType: constituentType} \r\n              :\r\n              {\r\n                inputPartRatio: partRatio, \r\n                supplier: supplier, \r\n                grade: rockType, \r\n                constituentType: constituentType\r\n              } \r\n              ;\r\n              composition.push(compositionPart);\r\n              setPartRatio(null);\r\n              setSupplier(null);\r\n              setRockType(null);\r\n            }\r\n          }}\r\n          >Add</Button>\r\n          <span style={{ marginLeft: '20px'}}>\r\n          <span style={{borderRadius:'2px', padding: '3.5px', marginLeft:'15px', color: 'yellow', backgroundColor: '#1890ff'}}>\r\n              <span style={{color:'yellow'}}>{composition.length}</span> constituents\r\n          </span>\r\n          <Button\r\n          style={{marginTop:'2px', marginLeft: '3px', border: '1px solid #1890ff'}}\r\n          onClick={() => {\r\n            setComposition([]);\r\n          }}\r\n          >Reset constituents</Button>\r\n          </span>\r\n        </Form.Item>\r\n \r\n         \r\n      </Form>\r\n      </Col>\r\n      <Col xs={{span:24}} md={{span:24}}>\r\n          <Button style={{}} type=\"primary\" onClick={sendEntry}>{ submitFormLoader? <LoadingOutlined/>:\"Save\"}</Button>  \r\n          <Button style={{}} onClick={()=>{\r\n               setShowAffermation(false); \r\n\r\n               setDateForComponent(null);\r\n               setShift(null);\r\n               setQuantity(null);\r\n               setComposition([]); \r\n               setMineralName(null);\r\n               setMineralId(null); \r\n               setGradeName(null);\r\n               setProductionUnit(null);\r\n          }} type=\"link\">Reset</Button>\r\n      </Col>\r\n        </Row>\r\n\r\n        <Modal title=\"Confirmation\" visible={showAffirmation} \r\n        footer={[\r\n            <Button key=\"back\" type=\"ghost\" onClick={() => {\r\n              setDeleteByIdLoader(true);\r\n              console.log(dataAffirmationFromDB);\r\n                //delete the record from database and resubmit\r\n                axios.post(API_BASE + \"/api/grindingEntryModel/deleteById/\" + dataAffirmationFromDB[0]._id, dataAffirmationFromDB[0], {headers : {\r\n                  'Authorization': `${sessionStorage.getItem('rkminToken')}`\r\n                }}).then((res)=>{\r\n                    // failureToast(res.data.message + \"deleted\");\r\n                    // pdfEntryErrorReport.add(JSON.stringify(dataAffirmationFromDB));\r\n                    // pdfEntryErrorReport.create().download();\r\n                }).then(()=>{\r\n                  setShowAffermation(false);\r\n                  setDeleteByIdLoader(false);\r\n                }).catch(err => {\r\n                  failureToast(\"Error! Not deleted\");\r\n                  setDeleteByIdLoader(false);\r\n                })\r\n            }}>{deleteByIdLoader ? <LoadingOutlined/> : \"Edit\" }\r\n            </Button>,\r\n            <Button key=\"submit\" type=\"primary\" onClick={()=>{\r\n                successToast(\"Entry Saved\");\r\n                setShowAffermation(false);\r\n                \r\n                setDateForComponent(null);\r\n                setShift(null);\r\n                setQuantity(null);\r\n                setComposition([]); \r\n                setMineralName(null);\r\n                setMineralId(null); \r\n                setGradeName(null);\r\n                setProductionUnit(null);\r\n                }}>\r\n              Done\r\n            </Button>,\r\n            // <Button\r\n            //   key=\"link\"\r\n            //   href=\"https://google.com\"\r\n            //   type=\"primary\"\r\n            //   loading={loading}\r\n            //   onClick={this.handleOk}\r\n            // >\r\n            //   Search on Google\r\n            // </Button>,\r\n          ]}  onCancel={() => {}}> \r\n            Please re-examin the submitted document\r\n            <br/>\r\n            <sub> Click on \"Submit\" to save or click on \"Edit\" to make changes  </sub>\r\n            <br/>\r\n            <hr/>\r\n            <ul>\r\n            {\r\n            dataAffirmationFromDB? Object.keys(dataAffirmationFromDB[0]).map((key) => {\r\n                if(key != \"_id\" && key != \"timeStamp\" && key != \"__v\") {\r\n                     return <li>{key} : {JSON.stringify(dataAffirmationFromDB[0][key])}</li>\r\n                } else {\r\n                    return \"\";\r\n                }\r\n            })\r\n            :\r\n            \"\"\r\n            }\r\n            </ul>\r\n        </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default GrindingEntryForm;"]},"metadata":{},"sourceType":"module"}